\chapter{Технологический раздел}

\section{Требование к ПО}

Программа должна предоставлять следующий функционал:
\begin{itemize}[label*=---]
    \item Загрузка сцены из файла;
    \item Вокселизация сцены;
    \item Получение изображения сцены с учетом материалов объектов сцены и освещения;
    \item Интерактивное управление камерой;
    \item Время отрисовки одного кадра не больше 100мс;
    \item Осуществление поворота и перемещения камеры;
    \item Симуляция распространения воксельных частиц воды.
\end{itemize}

Программа должна корректно и оперативно реагировать на все действия пользователя.

\section{Средства реализации разработанного ПО}

В качестве графического API для реализации разработанного ПО 
был выбран WebGPU -- современный переносимый графический
API, с уровнем контроля над видеокартой, совместимым с графическими API последних поколений 
(Vulkan, DirectX12, Metal), способный быть использованным при разработке на любой из платформ, 
поддерживающих классические API (Direct3D, Metal, Vulakn, OpenGLES, WebGL и др.)~\cite{WebGPU}.

В качестве языка программирования для реализации ПО был выбран Rust -- 
статически типизированный компилируемый язык программирования общего назначения~\cite{Rust}.
Данный выбор обусловлен наличием возможностей написания производительного кода, 
компиляции на множественное число платформ, в том числе на WASM, наличием
библиотек с поддержкой WebGPU, линейной алгебры.

Для реализации графического интерфейса была выбрана библиотека Dear ImGui.
Она реализует графический интерфейс в режиме IMGUI. Библиотека написана 
для использования с любым графическим API и представляет способ динамического 
программирования интерфейсов любой сложности~\cite{ImGui}.

ПО реализовано для платформы WASM и нативных (MacOS, Linux, Windows).

\section{Реализация алгогитма трассировки лучей}

Алгоритм трассировки реализована в 
вершинном и фрагментном шейдерах на языке WGSL~\cite{WebGPUSL}.
В качестве генератора случайных чисел был выбран алгоритм xorshift32~\cite{xorshift}
с временем отрисовываемого кадра в качестве источника энтропии. Это сделано
из-за возможности эффективного выполнения алгоритма на GPU в 
силу параллелазции на уровне инструкций. На листинге~\ref{lst:xorshift.wgsl} представлена 
функции генерации случайных чисел, и инициализация генератора случаных чисел.

\includelisting
    {xorshift.wgsl}
    {Реализация генератора случайных чисел в шейдере}

\section{Вывод}

В данном разделе были описаны детали реализации разработанной программы. 
Также был рассмотрен процесс взаимодействия пользователя с программой.
Были приведены примеры работы.
