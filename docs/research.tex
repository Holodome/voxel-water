\chapter{Исследовательская часть}

\section{Технические характеристики}

Технические характеристики устройства, на котором выполнялось тестирование:
\begin{itemize}
    \item операционная система MacOS Ventura 13.2.1 (22D68);
    \item 16 ГБ оперативной памяти;
    \item центральный процессор Apple M1~\cite{M1};
    \item графический процессор Apple M1~\cite{M1}.
\end{itemize}

Графический процессор имеет 8 ядер, каждое из которых имеет 16 модулей 
исполнения, каждый из которых содержит 8 АЛУ. Таким образом, 
одновременно могут испольняться 24576 потоков и максимальная вычислительная мощность
равняется 2.4 TFLOPS.

\section{Постановка исследования}

Целью исследования является определение времени отрисовки кадра 
от дальности отрисовки и максимального числа отскоков луча в алгоритме трассировки.

Параметр дальности отрисовки варьируются от 1 до 128. Параметр числа отскоков 
варьируется от 1 до 8.

Исследование проводится с целью сравнения влияния параметров раелизаций двух 
оснонвых алгоритмов в процессе отрисовки на время отрисовки с целью определения
более предпочтительного из двух для изменения или оптимизации.

\section{Средства реализации}

Временем кадара является разность значения процессороного времени на момент начала кадра с 
аналогичным значением прошлого кадра. При замерах сцена остается неизменной, что
минимизирует число накладных расходов. В качестве времени кадра берется
среднее значение за отрисовку 1000 кадров одной сцены.

Замеры проводились на ноутбуке, включенном в сеть 
электропитания. Во время замеров ноутбук был нагружен только 
встроенными приложениями окружения, окружением, а 
также непосредственно тестируемой программой.

\section{Результат исследования}

На рисунке~\ref{img:research} приведена зависимость времени отрисовки кадра от максимального числа отскоков и дальности отрисовки. В таблице~\ref{tbl:research} представлены результаты
замеров.

\begin{figure}[H]
  \centering
  \includesvg[width=0.80\textwidth]{inc/img/research}
  \caption{\label{img:research}Зависимость времени отрисовки кадра от максимального числа отскоков и дальности отрисовки}
\end{figure}

\begin{table}[H]
\caption{Зависимость времени отрисовки кадра от максимального числа отскоков и дальности отрисовки}
\label{tbl:research}
\begin{tabular}{|r|rrrr|}
\hline
\multirow{3}{*}{Дальности отрисовки} & \multicolumn{4}{r|}{Время, мс}                                                                  \\ \cline{2-5} 
                                     & \multicolumn{4}{r|}{\begin{tabular}[c]{@{}r@{}}Максимальное число \\ отскоков\end{tabular}}     \\ \cline{2-5} 
                                     & \multicolumn{1}{r|}{1}     & \multicolumn{1}{r|}{2}      & \multicolumn{1}{r|}{4}      & 8      \\ \hline
1                                    & \multicolumn{1}{r|}{3.641} & \multicolumn{1}{r|}{3.660}  & \multicolumn{1}{r|}{3.688}  & 4.670  \\ \hline
2                                    & \multicolumn{1}{r|}{4.265} & \multicolumn{1}{r|}{5.490}  & \multicolumn{1}{r|}{5.152}  & 5.459  \\ \hline
4                                    & \multicolumn{1}{r|}{5.060} & \multicolumn{1}{r|}{6.175}  & \multicolumn{1}{r|}{8.581}  & 10.872 \\ \hline
8                                    & \multicolumn{1}{r|}{5.635} & \multicolumn{1}{r|}{8.197}  & \multicolumn{1}{r|}{12.921} & 17.419 \\ \hline
16                                   & \multicolumn{1}{r|}{6.583} & \multicolumn{1}{r|}{11.393} & \multicolumn{1}{r|}{19.344} & 27.282 \\ \hline
32                                   & \multicolumn{1}{r|}{8.445} & \multicolumn{1}{r|}{16.853} & \multicolumn{1}{r|}{29.014} & 44.934 \\ \hline
64  & \multicolumn{1}{r|}{11.598} & \multicolumn{1}{r|}{26.373} & \multicolumn{1}{r|}{48.483} & 77.935  \\ \hline
128 & \multicolumn{1}{r|}{17.558} & \multicolumn{1}{r|}{45.966} & \multicolumn{1}{r|}{86.207} & 141.334 \\ \hline
\end{tabular}
\end{table}

\section{Вывод}

Время отрисовки кадра зависит линейно, как от дальности видимости, так и от
максимального числа отскоков луча в алгоритме трассировки. Использование 
оптимизационных структур для проверки столкновений, или замена алгоритма 
проверки столкновений с простого на, к примеру, kd-дерево повлечет 
уменьшение времени отрисовки за счет уменьшения ассимптотической сложности 
алгоритма.

В то же время, небольшие значения параметров в рамках рассматриваемых диапазнов
позволяют получать изображение за время, достаточное для отрисовки в реальном времени на 
небольших сценах.



